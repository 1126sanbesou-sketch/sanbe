<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="description" content="ホテル客室チェックアウト・清掃管理システム">
  <title>客室管理システム</title>
  <link rel="stylesheet" href="styles.css?v=2">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
</head>

<body>
  <div class="app-container">
    <!-- ヘッダー -->
    <header class="header">
      <div class="header-content">
        <h1 class="header-title">
          <span class="header-icon">🏨</span>
          客室管理システム
        </h1>
        <div class="header-actions">
          <button class="header-btn" id="modeToggleBtn" onclick="toggleMode()">
            <span id="modeIcon">📋</span>
          </button>
          <div class="connection-status" id="connectionStatus">
            <span class="status-dot"></span>
          </div>
        </div>
      </div>
    </header>

    <!-- 選択モード画面 -->
    <main class="main-content" id="selectionView">
      <div class="view-header">
        <h2 class="view-title">🛏️ 本日の使用客室を選択</h2>
        <p class="view-subtitle">使用する客室をタップしてください</p>
      </div>

      <div class="selection-actions">
        <button class="action-btn action-btn-secondary" onclick="selectNone()">全解除</button>
        <button class="action-btn action-btn-secondary" onclick="selectAll()">全選択</button>
        <button class="action-btn action-btn-primary" onclick="confirmSelection()">
          決定 (<span id="selectedCount">0</span>室)
        </button>
      </div>

      <div id="selectionList" class="room-list selection-mode">
        <!-- 動的に生成 -->
      </div>
    </main>

    <!-- 管理モード画面 -->
    <main class="main-content hidden" id="managementView">
      <div class="view-header">
        <h2 class="view-title">📋 チェックアウト管理</h2>
        <div class="progress-bar">
          <div class="progress-fill" id="progressFill"></div>
        </div>
        <p class="progress-text"><span id="outCount">0</span> / <span id="totalActiveCount">0</span> 室 OUT完了</p>
      </div>

      <div id="managementList" class="room-list management-mode">
        <!-- 動的に生成 -->
      </div>
    </main>

    <!-- フッター（管理者用） -->
    <footer class="footer">
      <button class="reset-button" id="resetButton" onclick="confirmReset()">
        🔄 日次リセット
      </button>
    </footer>

    <!-- リセット確認モーダル -->
    <div class="modal-overlay" id="modalOverlay" onclick="closeModal()">
      <div class="modal" onclick="event.stopPropagation()">
        <h2 class="modal-title">⚠️ 確認</h2>
        <p class="modal-message">全てのステータスをリセットしますか？<br>選択状態もクリアされます。</p>
        <div class="modal-buttons">
          <button class="modal-btn modal-btn-cancel" onclick="closeModal()">キャンセル</button>
          <button class="modal-btn modal-btn-confirm" onclick="executeReset()">リセット実行</button>
        </div>
      </div>
    </div>

    <!-- 通知トースト -->
    <div class="toast" id="toast"></div>
  </div>

  <script src="app.js?v=7"></script>
</body>

